<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Personal Profile</title>
	<link rel = "stylesheet" type="text/css" href = "../css/worker_profile.css">
	<link rel = "icon" href = "https://library.kissclipart.com/20180830/abq/kissclipart-train-clipart-train-rail-transport-rapid-transit-c4c301d377f15d73.png">
	<script src="../scripts/jquery.min.js"></script>
	<script type="text/javascript">
	
	function getInfo() {
		
        $.get('../services/workerAccInfo', {}, function(r) {
            update(r);
        }, 'json');
        
    }
	
	function update(items) {
		
		$("#first-name").append("First name: " + items[0]);
		$("#last-name").append("Last name: " + items[1]);
		$("#email").append("Email: " + items[2]);
		$("#position").append("Position: " + items[3]);
		
		if (items[8] == 'M') {
			
			$("#gender").append("Gender: " + "Male");
			
		} else {
			
			$("#gender").append("Gender: " + "Female");
			
		}
		
		$("#birth-date").append("Birth Date: " + items[5]);
		$("#address").append("Home Address: " + items[6]);
		$("#phone-number").append("Phone Number: " + items[7]);
		$("#bank-acc-num").append("Bank Account Number: " + items[4]);
		$("#salary").append("Salary: " + items[10]);
		
		if (items[3] == "Agent") {
			
			$("#payday").append("Pay day: " + items[9]);
			$("#manager-name").append("Manager Name: " + items[12] + " " + items[13]);
			$("#manager-email").append("Manager Email: " + items[11]);
		
			$("#manager-block").remove();
			$("#admin-block").remove();
			
		} else if (items[3] == "Manager"){
			
			$("#payday").append("Pay day: " + items[9]);
			
			$("#agent-block").remove();
			$("#admin-block").remove();
			
		} else {
			
			$("#agent-block").remove();
			$("#manager-block").remove();
			
		}
		
    }
	
	$(document).ready(function () {	
		
		getInfo();

		$("#log-out-button").on('click', function (r) {
			$.post("../services/logout", {}, function(r){
				console.log(r);
				window.location.href = "../index.html";
			}).fail(function(r) {
				alert("Error log out");
			});
		});
		
		
		$("#add_carriage").on('click', function (r) {
			
			window.location.href = "../agent/add_carriage.html";
			
		});
		
		$("#add_train").on('click', function (r) {
			
			window.location.href = "../agent/add_train.html";
			
		});
		
		$("#train_schedule").on('click', function (r) {
			
			window.location.href = "../agent/train_schedule.html";
			
		});
		
		$("#add_schedule").on('click', function (r) {
			
			window.location.href = "../manager/add_schedule.html";
			
		});
		
		$("#send_news").on('click', function (r) {
			
			window.location.href = "../manager/send_news.html";
			
		});
		
		$("#manage-agents").on('click', function (r) {
			
			window.location.href = "../manager/manage_agents.html";
			
	    });
		
		$("#manage-routes").on('click', function (r) {
			
			window.location.href = "../manager/route_management.html";
			
	    });
		
		$("#manage-managers").on('click', function (r) {
			
			window.location.href = "../admin/manage_managers.html";
			
		});
		
		$("#subordinate-employee").on('click', function (r) {
			
			window.location.href = "../manager/subordinate_employee.html";
			
		});
		
		$("#manage-logs").on('click', function (r) {
			
			window.location.href = "../manager/manage_logs.html";
			
		});

		$("#main-page").on('click', function () {
			window.location.href = "../index.html";
		});
	    
	});
	
	</script>
</head>
<body>
<!-- Header -->
	<div class="header">
		<h1>Train Developers</h1>
	</div>

<!-- Menu bar -->
	<div class="nav">
		<ul>
			<li id="main-page">Main Page</li>
			<li id="profile-button" style="display:none">Go to profile</li>
			<li id="log-out-button">Log Out</li>
		</ul>
	</div>
<!-- Personal profile -->
	<div class="main_section">
		<h3>Personal Profile</h3>
		<div class="form-background">
			<div class="info">
				<div>
					<div id="first-name"></div><br>
					<div id="last-name"></div><br>
					<div id="email"></div><br>
					<div id="position"></div><br>
					<div id="gender"></div><br>
					<div id="birth-date"></div><br>
					<div id="address"></div><br>
				</div>
				<div>
					<div id="phone-number"></div><br>
					<div id="bank-acc-num"></div><br>
					<div id="salary"></div><br>
					<div id="payday"></div><br>
					<div id="manager-name"></div><br>
					<div id="manager-email"></div>
				</div>
			</div>
			<div class="buttons">
				<button id="changePassword" onclick="window.location.href='change_password.html'">Change Password</button>
				<div id="agent-block">
					<button id="cancelled-tickets" onclick="window.location.href='../agent/cancelled_tickets.html'"> Requests to cancel</button>
					<button id="edited-tickets" onclick="window.location.href='../agent/edited_tickets.html'">Requests to edit</button>
					<button id="add_carriage">Add Carriage</button>
					<button id="add_train">Add Train</button>
					<button id="train_schedule">Train Schedules</button>
					<br><br>
				</div>
				<div id="manager-block">
					<button id="manage-agents">Manage Agents</button>
					<button id="manage-routes">Manage Routes</button>
					<button id="add_schedule">Add Schedules</button>
					<button id="subordinate-employee">My Employees</button>
					<button id="send_news">Send News</button>
					<button id="manage-logs">Manage Logs</button>
					<br><br>
				</div>
				<div id="admin-block">
					<button id="manage-managers">Manage Managers</button>
					<br><br>
				</div>
			</div>
		</div>
	</div>

<!-- Contacts -->
	<div class="footer">
		<h3>Contact us</h3>
		<div class="contact-container">
			<div><p>email: train.dev@nu.edu.kz</p></div>
			<div><p>telephone: +77777777777</p></div>
			<div><p>telephone: +77777777778</p></div>
		</div>
</div>
</body>
</html>
